# API для социальной сети Yatube

REST API для социальной сети блогов, позволяющее создавать посты, комментарии и управлять группами.

## Технологии

- Python 3.11+
- Django 5.1
- Django REST Framework 3.15
- SQLite (для разработки)
- Pillow 11.0 (для работы с изображениями)

## Функционал API

- Аутентификация по токенам
- Создание, редактирование и удаление постов
- Комментирование постов
- Просмотр и создание групп
- Права доступа:
  - Только автор может изменять/удалять свои посты и комментарии
  - Анонимные пользователи могут только просматривать контент
  - Аутентифицированные пользователи могут создавать контент

## Модели данных

- **Пользователи** (стандартная модель Django)
- **Группы** (тематические сообщества для постов)
- **Посты** (основной контент пользователей)
- **Комментарии** (комментарии к постам)

## Установка и запуск

1. Клонируйте репозиторий:

    ```bash
    git clone <url_репозитория>
    cd <папка_проекта>
    ```

2. Создайте и активируйте виртуальное окружение:

    ```bash
    python3.12 -m venv venv
    source venv/bin/activate  # Linux/macOS
    venv/Scripts/activate     # Windows
    ```

3. Установите зависимости:

    ```bash
    pip install -r requirements.txt
    ```

4. Выполните миграции базы данных:

    ```bash
    python manage.py migrate
    ```

5. (Опционально) Загрузите стартовые данные:

    ```bash
    bash postman_collection/set_up_data.sh
    ```

6. Запустите сервер разработки:

    ```bash
    python manage.py runserver
    ```

7. Откройте в браузере: `http://127.0.0.1:8000/`

## Тестирование

Запустите автотесты с помощью pytest:

```bash
pytest
```

## API

- Для удобства в папке `postman_collection` есть готовая Postman коллекция `CRUD_for_yatube.postman_collection.json`.

- API поддерживает аутентификацию через токены (TokenAuthentication).

- Основные эндпоинты:

  - `/api/posts/` — операции с постами (создание, просмотр, редактирование, удаление).

  - `/api/groups/` — просмотр групп (только чтение).

  - `/api/posts/{post_id}/comments/` — комментарии к конкретному посту (создание, просмотр, редактирование, удаление).

## Особенности моделей

- **Group**  
  - Поля: `title`, `slug` (уникальный), `description`  
  - Добавлены `verbose_name` и `verbose_name_plural` для удобства в админке  
  - Строковое представление (`__str__`) возвращает название группы  

- **Post**  
  - Поля: `text`, `pub_date` (автоматически дата создания), `author` (связь с пользователем), `image` (опционально), `group` (опционально)  
  - `verbose_name` для всех полей и моделей  
  - Строковое представление обрезает текст поста до 50 символов с многоточием, чтобы не загромождать админку  
  - Посты упорядочены по дате публикации в обратном порядке (новые сверху)  

- **Comment**  
  - Поля: `author`, `post`, `text`, `created` (дата создания, индексирована для быстрого поиска)  
  - Также с `verbose_name` и `verbose_name_plural`  
  - Строковое представление обрезает текст комментария до 50 символов  
  - Комментарии упорядочены по дате создания (свежие сверху)
